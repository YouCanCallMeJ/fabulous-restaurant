"use strict";(self.webpackChunkangular_bootstrap_template=self.webpackChunkangular_bootstrap_template||[]).push([[56],{8056:(M,l,a)=>{a.r(l),a.d(l,{UserModule:()=>E});var u=a(9808),n=a(3099),e=a(1223),m=a(6908);let g=(()=>{class t{constructor(s,r,d){this.route=s,this.router=r,this.accountService=d,this.user=null,"admin"!==this.accountService.userValue.username&&(this.router.navigateByUrl("/"),alert("Only Admin can access to users page!"))}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(n.gz),e.Y36(n.F0),e.Y36(m.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-layout"]],decls:2,vars:0,consts:[[1,"col-md-6","offset-md-3","mt-5"]],template:function(s,r){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},directives:[n.lC],styles:[""]}),t})();function Z(t,i){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"div",6),e.TgZ(5,"span",7),e._uU(6,"User"),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.TgZ(8,"a",9),e._uU(9,"Edit/Delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",10),e.TgZ(11,"div",10),e.TgZ(12,"h5",11),e._uU(13),e.qZA(),e.TgZ(14,"h6",12),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const s=i.$implicit;e.xp6(8),e.MGl("routerLink","/user/edit/",s.userId,""),e.xp6(5),e.Oqu(s.username),e.xp6(2),e.AsE("",s.firstName," ",s.lastName,"")}}let f=(()=>{class t{constructor(s){this.accountService=s,this.users=null}ngOnInit(){this.accountService.selectAllUser().then(s=>this.users=s).catch(s=>console.log(s))}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(m.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list"]],decls:6,vars:1,consts:[[1,"text-end"],["routerLink","/user/add",1,"btn","btn-success","mb-2"],[4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"fs-5"],[1,"col","text-end"],[1,"btn","btn-sm","btn-primary","me-2",3,"routerLink"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"]],template:function(s,r){1&s&&(e.TgZ(0,"h1"),e._uU(1,"Users"),e.qZA(),e.TgZ(2,"div",0),e.TgZ(3,"a",1),e._uU(4,"Add User"),e.qZA(),e.qZA(),e.YNc(5,Z,16,4,"div",2)),2&s&&(e.xp6(5),e.Q6J("ngForOf",r.users))},directives:[n.yS,u.sg],styles:[""]}),t})();var o=a(2382),v=a(3104);function h(t,i){1&t&&(e.TgZ(0,"h4",21),e._uU(1,"Add User"),e.qZA())}function A(t,i){1&t&&(e.TgZ(0,"h4",21),e._uU(1,"Edit User"),e.qZA())}function _(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Username is required"),e.qZA())}function T(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,_,2,0,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.username.errors.required)}}function q(t,i){1&t&&(e.TgZ(0,"em"),e._uU(1,"*"),e.qZA())}function U(t,i){1&t&&(e.TgZ(0,"em"),e._uU(1,"(Leave blank to keep the password)"),e.qZA())}function b(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password is required"),e.qZA())}function N(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Password must be at least 6 characters"),e.qZA())}function C(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,b,2,0,"div",9),e.YNc(2,N,2,0,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.password.errors.required),e.xp6(1),e.Q6J("ngIf",s.f.password.errors.minlength)}}function y(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"First Name is required"),e.qZA())}function x(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,y,2,0,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.firstName.errors.required)}}function I(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Last Name is required"),e.qZA())}function J(t,i){if(1&t&&(e.TgZ(0,"div",22),e.YNc(1,I,2,0,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.f.lastName.errors.required)}}function S(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(s);const d=e.oxw();return d.deleteUser(d.user.userId)}),e._uU(1,"Delete"),e.qZA()}}const c=function(t){return{"is-invalid":t}};let p=(()=>{class t{constructor(s,r,d,Q,L){this.formBuilder=s,this.route=r,this.router=d,this.restaurantDatabaseService=Q,this.accountService=L,this.isAddMode=!0,this.submitted=!1,this.user=null,this.users=null}ngOnInit(){this.id=Number(this.route.snapshot.params.id),this.isAddMode=!this.id,this.form=this.formBuilder.group({username:["",o.kI.required],password:["",[o.kI.required,o.kI.minLength(6)]],firstName:["",o.kI.required],lastName:["",o.kI.required],userId:[""]}),this.accountService.selectAllUser().then(s=>{this.users=s}).catch(s=>console.error(s)),this.isAddMode||this.accountService.selectUser(this.id).then(s=>{this.user=s,this.form.patchValue({username:this.user.username,password:"",firstName:this.user.firstName,lastName:this.user.lastName,userId:this.user.userId})}).catch(s=>console.error(s))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.isAddMode?this.createUser():this.updateUser())}createUser(){this.accountService.insertUser(this.form.value,()=>{console.log("Success: Record user added successfully"),alert("Success: Record user added successfully")})}updateUser(){""===this.form.value.password&&(this.form.value.password=this.user.password),this.accountService.updateUser(this.form.value,()=>{console.log("Success: Record user updated successfully"),alert("Success: Record user updated successfully"),this.user=this.form.value})}deleteUser(s){const r=this.users.find(d=>d.userId===s);this.accountService.deleteUser(r,()=>{alert("Record user deleted successfully"),this.router.navigateByUrl("/")})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(o.qu),e.Y36(n.gz),e.Y36(n.F0),e.Y36(v.f),e.Y36(m.B))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-edit"]],decls:35,vars:22,consts:[[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","username",1,"form-label"],["type","text","name","username","id","username","formControlName","username",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password",1,"form-label"],[4,"ngIf"],["type","text","name","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],["for","firstName",1,"form-label"],["type","text","name","firstName","id","firstName","formControlName","firstName",1,"form-control",3,"ngClass"],["for","lastName",1,"form-label"],["type","text","name","lastName","id","lastName","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","mb-3","row"],[1,"col"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-primary"],["routerLink","/user/list",1,"btn","btn-link"],[1,"card-header"],[1,"invalid-feedback"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(s,r){1&s&&(e.TgZ(0,"div",0),e.YNc(1,h,2,0,"h4",1),e.YNc(2,A,2,0,"h4",1),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"Username *"),e.qZA(),e._UZ(8,"input",6),e.YNc(9,T,2,1,"div",7),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"label",8),e._uU(12,"Password "),e.YNc(13,q,2,0,"em",9),e.YNc(14,U,2,0,"em",9),e.qZA(),e._UZ(15,"input",10),e.YNc(16,C,3,2,"div",7),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"label",11),e._uU(19,"First Name *"),e.qZA(),e._UZ(20,"input",12),e.YNc(21,x,2,1,"div",7),e.qZA(),e.TgZ(22,"div",4),e.TgZ(23,"label",13),e._uU(24,"Last Name *"),e.qZA(),e._UZ(25,"input",14),e.YNc(26,J,2,1,"div",7),e.qZA(),e.TgZ(27,"div",15),e.TgZ(28,"div",16),e.YNc(29,S,2,0,"button",17),e.qZA(),e.TgZ(30,"div",18),e.TgZ(31,"button",19),e._uU(32,"Save"),e.qZA(),e.TgZ(33,"a",20),e._uU(34,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(1),e.Q6J("ngIf",r.isAddMode),e.xp6(1),e.Q6J("ngIf",!r.isAddMode),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(4),e.Q6J("ngClass",e.VKq(14,c,r.submitted&&r.f.username.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.username.errors),e.xp6(4),e.Q6J("ngIf",r.isAddMode),e.xp6(1),e.Q6J("ngIf",!r.isAddMode),e.xp6(1),e.Q6J("ngClass",e.VKq(16,c,r.submitted&&r.f.password.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.password.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(18,c,r.submitted&&r.f.firstName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.firstName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(20,c,r.submitted&&r.f.lastName.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.lastName.errors),e.xp6(3),e.Q6J("ngIf",!r.isAddMode))},directives:[u.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,u.mk,n.yS],styles:[""]}),t})();const Y=[{path:"",component:g,children:[{path:"",component:f},{path:"list",component:f},{path:"add",component:p},{path:"edit/:id",component:p}]}];let w=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[n.Bz.forChild(Y)],n.Bz]}),t})(),E=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,w,o.UX]]}),t})()}}]);