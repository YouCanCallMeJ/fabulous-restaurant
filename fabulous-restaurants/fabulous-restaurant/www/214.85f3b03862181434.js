"use strict";(self.webpackChunkangular_bootstrap_template=self.webpackChunkangular_bootstrap_template||[]).push([[214],{4214:(Y,f,i)=>{i.r(f),i.d(f,{RestaurantModule:()=>E});var d=i(9808),u=i(3099),t=i(1223);let Z=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-layout"]],decls:2,vars:0,consts:[[1,"col-md-6","offset-md-3","mt-5"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},directives:[u.lC],styles:[""]}),e})();var g=i(7105);function A(e,a){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.TgZ(4,"div",6),t.TgZ(5,"span",7),t._uU(6,"Restaurant"),t.qZA(),t.qZA(),t.TgZ(7,"div",8),t.TgZ(8,"a",9),t._uU(9,"Edit/Delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",10),t.TgZ(11,"div",10),t.TgZ(12,"h5",11),t._uU(13),t.qZA(),t.TgZ(14,"h6",12),t._uU(15),t.qZA(),t.TgZ(16,"p",13),t._uU(17),t.qZA(),t.TgZ(18,"p",13),t._uU(19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const n=a.$implicit;t.xp6(8),t.MGl("routerLink","/restaurant/edit/",n.id,""),t.xp6(5),t.Oqu(n.restaurantName),t.xp6(2),t.Oqu(n.restaurantLocation),t.xp6(2),t.Oqu(n.restaurantMainMenu),t.xp6(2),t.Oqu(n.restaurantPhone)}}let h=(()=>{class e{constructor(n){this.restaurantDALService=n,this.restaurants=null}ngOnInit(){this.restaurantDALService.selectAllRestaurant().then(n=>this.restaurants=n).catch(n=>console.log(n))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(g.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:6,vars:1,consts:[[1,"text-end"],["routerLink","/restaurant/add",1,"btn","btn-success","mb-2"],[4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"fs-5"],[1,"col","text-end"],[1,"btn","btn-sm","btn-primary","me-2",3,"routerLink"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"]],template:function(n,r){1&n&&(t.TgZ(0,"h1"),t._uU(1,"Restaurants"),t.qZA(),t.TgZ(2,"div",0),t.TgZ(3,"a",1),t._uU(4,"Add Restaurant"),t.qZA(),t.qZA(),t.YNc(5,A,20,5,"div",2)),2&n&&(t.xp6(5),t.Q6J("ngForOf",r.restaurants))},directives:[u.yS,d.sg],styles:[""]}),e})();var o=i(2382),_=i(3104);function T(e,a){1&e&&(t.TgZ(0,"h4",23),t._uU(1,"Add Restaurant"),t.qZA())}function b(e,a){1&e&&(t.TgZ(0,"h4",23),t._uU(1,"Edit Restaurant"),t.qZA())}function q(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Restaurant Name is required"),t.qZA())}function C(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,q,2,0,"div",25),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.restaurantName.errors.required)}}function y(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Restaurant Main Menu is required"),t.qZA())}function M(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,y,2,0,"div",25),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.restaurantMainMenu.errors.required)}}function L(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Restaurant Phone is required"),t.qZA())}function R(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Restaurant Phone is not valid format. (e.g., 123-123-1234)"),t.qZA())}function x(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,L,2,0,"div",25),t.YNc(2,R,2,0,"div",25),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.restaurantPhone.errors.required),t.xp6(1),t.Q6J("ngIf",n.f.restaurantPhone.errors.pattern)}}function N(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"Restaurant Location is required"),t.qZA())}function S(e,a){if(1&e&&(t.TgZ(0,"div",24),t.YNc(1,N,2,0,"div",25),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.f.restaurantLocation.errors.required)}}function I(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return s.deleteRestaurant(s.restaurant.id)}),t._uU(1,"Delete"),t.qZA()}}const c=function(e){return{"is-invalid":e}};let v=(()=>{class e{constructor(n,r,s,m,p){this.formBuilder=n,this.route=r,this.router=s,this.restaurantDatabaseService=m,this.restaurantDALService=p,this.isAddMode=!0,this.submitted=!1,this.restaurant=null,this.restaurants=null,this.useGPS=!1}ngOnInit(){this.id=Number(this.route.snapshot.params.id),this.isAddMode=!this.id,this.form=this.formBuilder.group({restaurantName:["",o.kI.required],restaurantLocation:["",o.kI.required],restaurantMainMenu:["",o.kI.required],restaurantPhone:["",[o.kI.required,o.kI.pattern("^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$")]],id:[""]}),this.isAddMode||(this.restaurantDALService.selectRestaurant(this.id).then(n=>{this.restaurant=n,this.form.patchValue({restaurantName:this.restaurant.restaurantName,restaurantLocation:this.restaurant.restaurantLocation,restaurantMainMenu:this.restaurant.restaurantMainMenu,restaurantPhone:this.restaurant.restaurantPhone,id:this.restaurant.id})}).catch(n=>console.error(n)),this.restaurantDALService.selectAllRestaurant().then(n=>{this.restaurants=n}).catch(n=>console.error(n))),navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{this.lati=r.coords.latitude,this.lngi=r.coords.longitude,alert("GPS is ready!"),this.useGPS=!0},()=>{alert("Can't get current location")},{enableHighAccuracy:!0,timeout:6e4,maximumAge:0}):alert("Geolocation is not supported by this browser.")}get f(){return this.form.controls}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.isAddMode?this.createRestaurant():this.updateRestaurant())}createRestaurant(){this.restaurantDALService.insertRestaurant(this.form.value,()=>{console.log("Success: Record added successfully"),alert("Success: Record added successfully")})}updateRestaurant(){this.restaurantDALService.updateRestaurant(this.form.value,()=>{console.log("Success: Record updated successfully"),alert("Success: Record updated successfully")})}deleteRestaurant(n){const r=this.restaurants.find(s=>s.id===n);this.restaurantDALService.deleteRestaurant(r,()=>{alert("Record deleted successfully"),this.router.navigateByUrl("/")})}btnFindLocation_click(){document.getElementById("mapContainer").innerHTML="";var r=new H.service.Platform({apikey:"MroIgMS9oYam4pI0Bpef76GWyjt5oNdSvhw4_g-8GT8"}).createDefaultLayers(),s={zoom:15,center:{lat:this.lati,lng:this.lngi}},m=new H.Map(document.getElementById("mapContainer"),r.vector.normal.map,s),p=new H.map.Icon("assets/marker.png"),k=new H.map.Marker({lat:this.lati,lng:this.lngi},{icon:p});m.addObject(k);const P=document.querySelector("#restaurantLocation");fetch(`https://reverse.geocoder.ls.hereapi.com/6.2/reversegeocode.json?prox=${this.lati}%2C${this.lngi}&mode=retrieveAddresses&maxresults=1&gen=9&apiKey=MroIgMS9oYam4pI0Bpef76GWyjt5oNdSvhw4_g-8GT8`).then(l=>l.json()).then(l=>{P.innerHTML=l.Response.MataInfo,this.form.patchValue({restaurantLocation:l.Response.View[0].Result[0].Location.Address.Label})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(o.qu),t.Y36(u.gz),t.Y36(u.F0),t.Y36(_.f),t.Y36(g.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-edit"]],decls:37,vars:22,consts:[[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","restaurantName",1,"form-label"],["type","text","name","restaurantName","id","restaurantName","formControlName","restaurantName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","restaurantMainMenu",1,"form-label"],["type","text","name","restaurantMainMenu","id","restaurantMainMenu","formControlName","restaurantMainMenu",1,"form-control",3,"ngClass"],["for","restaurantPhone",1,"form-label"],["type","text","name","restaurantPhone","id","restaurantPhone","formControlName","restaurantPhone",1,"form-control",3,"ngClass"],["for","restaurantLocation",1,"form-label"],["type","text","name","restaurantLocation","id","restaurantLocation","formControlName","restaurantLocation",1,"form-control",3,"ngClass","readOnly"],[1,"text-end"],["type","button","id","btnFindLocation","name","btnFindLocation",1,"btn","btn-success","mt-1","mb-1",3,"hidden","click"],[1,"form-group","mb-3","row"],[1,"col"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-primary"],["routerLink","/restaurant/list",1,"btn","btn-link"],["id","mapContainer",2,"width","335px","height","335px"],[1,"card-header"],[1,"invalid-feedback"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t.YNc(1,T,2,0,"h4",1),t.YNc(2,b,2,0,"h4",1),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(5,"div",4),t.TgZ(6,"label",5),t._uU(7,"Restaurant Name *"),t.qZA(),t._UZ(8,"input",6),t.YNc(9,C,2,1,"div",7),t.qZA(),t.TgZ(10,"div",4),t.TgZ(11,"label",8),t._uU(12,"Restaurant Main Menu *"),t.qZA(),t._UZ(13,"input",9),t.YNc(14,M,2,1,"div",7),t.qZA(),t.TgZ(15,"div",4),t.TgZ(16,"label",10),t._uU(17,"Restaurant Phone *"),t.qZA(),t._UZ(18,"input",11),t.YNc(19,x,3,2,"div",7),t.qZA(),t.TgZ(20,"div",4),t.TgZ(21,"label",12),t._uU(22,"Restaurant Location *"),t.qZA(),t._UZ(23,"input",13),t.YNc(24,S,2,1,"div",7),t.TgZ(25,"div",14),t.TgZ(26,"button",15),t.NdJ("click",function(){return r.btnFindLocation_click()}),t._uU(27,"Current Location (GPS)"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",16),t.TgZ(29,"div",17),t.YNc(30,I,2,0,"button",18),t.qZA(),t.TgZ(31,"div",19),t.TgZ(32,"button",20),t._uU(33,"Save"),t.qZA(),t.TgZ(34,"a",21),t._uU(35,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"div",22),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",r.isAddMode),t.xp6(1),t.Q6J("ngIf",!r.isAddMode),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(4),t.Q6J("ngClass",t.VKq(14,c,r.submitted&&r.f.restaurantName.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.restaurantName.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(16,c,r.submitted&&r.f.restaurantMainMenu.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.restaurantMainMenu.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(18,c,r.submitted&&r.f.restaurantPhone.errors)),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.restaurantPhone.errors),t.xp6(4),t.Q6J("ngClass",t.VKq(20,c,r.submitted&&r.f.restaurantLocation.errors))("readOnly",!r.useGPS),t.xp6(1),t.Q6J("ngIf",r.submitted&&r.f.restaurantLocation.errors),t.xp6(2),t.Q6J("hidden",!r.useGPS),t.xp6(4),t.Q6J("ngIf",!r.isAddMode))},directives:[d.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,d.mk,u.yS],styles:[""]}),e})();const U=[{path:"",component:Z,children:[{path:"",component:h},{path:"list",component:h},{path:"add",component:v},{path:"edit/:id",component:v}]}];let J=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.Bz.forChild(U)],u.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,J,o.UX]]}),e})()}}]);