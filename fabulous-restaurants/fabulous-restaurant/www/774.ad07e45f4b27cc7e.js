"use strict";(self.webpackChunkangular_bootstrap_template=self.webpackChunkangular_bootstrap_template||[]).push([[774],{774:(F,l,o)=>{o.r(l),o.d(l,{ReviewModule:()=>Y});var u=o(9808),d=o(3099),e=o(1223);let Z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-layout"]],decls:2,vars:0,consts:[[1,"col-md-6","offset-md-3","mt-5"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},directives:[d.lC],styles:[""]}),t})();var v=o(4362),m=o(7105);function w(t,n){if(1&t&&(e.TgZ(0,"h5",14),e._uU(1),e.qZA()),2&t){const i=n.$implicit,r=e.oxw().$implicit;e.xp6(1),e.Oqu(i.id==r.restaurantId?i.restaurantName:"")}}function h(t,n){if(1&t&&(e.TgZ(0,"div"),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"div",6),e.TgZ(5,"span",7),e._uU(6,"Review"),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.TgZ(8,"a",9),e._uU(9,"Edit/Delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",10),e.TgZ(11,"div",10),e.YNc(12,w,2,1,"h5",11),e.TgZ(13,"h6",12),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._UZ(16,"span"),e._UZ(17,"span"),e._UZ(18,"span"),e._UZ(19,"span"),e._UZ(20,"span"),e.qZA(),e.TgZ(21,"p",13),e._uU(22),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const i=n.$implicit,r=e.oxw();e.xp6(8),e.MGl("routerLink","/review/edit/",i.reviewId,""),e.xp6(4),e.Q6J("ngForOf",r.restaurants),e.xp6(2),e.Oqu(i.username),e.xp6(2),e.Gre("fa fa-star ",i.reviewRating>=1?"checked":"",""),e.xp6(1),e.Gre("fa fa-star  ",i.reviewRating>=2?"checked":"",""),e.xp6(1),e.Gre("fa fa-star  ",i.reviewRating>=3?"checked":"",""),e.xp6(1),e.Gre("fa fa-star  ",i.reviewRating>=4?"checked":"",""),e.xp6(1),e.Gre("fa fa-star  ",i.reviewRating>=5?"checked":"",""),e.xp6(2),e.Oqu(i.reviewDetail)}}let f=(()=>{class t{constructor(i,r,a){this.router=i,this.reviewDALService=r,this.restaurantDALService=a,this.reviews=null,this.restaurants=null}ngOnInit(){this.reviewDALService.selectAllReview().then(i=>{this.reviews=i}).catch(i=>{console.log(i)}),this.restaurantDALService.selectAllRestaurant().then(i=>{this.restaurants=i,console.log(this.restaurants[0].restaurantName)}).catch(i=>console.log(i))}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(d.F0),e.Y36(v.e),e.Y36(m.$))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-list"]],decls:6,vars:1,consts:[[1,"text-end"],["routerLink","/review/add",1,"btn","btn-success","mb-2"],[4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"row"],[1,"col"],[1,"fs-5"],[1,"col","text-end"],[1,"btn","btn-sm","btn-primary","me-2",3,"routerLink"],[1,"card-body"],["class","card-title",4,"ngFor","ngForOf"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"],[1,"card-title"]],template:function(i,r){1&i&&(e.TgZ(0,"h1"),e._uU(1,"Reviews"),e.qZA(),e.TgZ(2,"div",0),e.TgZ(3,"a",1),e._uU(4,"Add Review"),e.qZA(),e.qZA(),e.YNc(5,h,23,19,"div",2)),2&i&&(e.xp6(5),e.Q6J("ngForOf",r.reviews))},directives:[d.yS,u.sg],styles:[".checked[_ngcontent-%COMP%]{color:orange}"]}),t})();var s=o(2382),A=o(3104),p=o(4356);function _(t,n){1&t&&(e.TgZ(0,"h4",22),e._uU(1,"Add Review"),e.qZA())}function T(t,n){1&t&&(e.TgZ(0,"h4",22),e._uU(1,"Edit Review"),e.qZA())}function q(t,n){if(1&t&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&t){const i=n.$implicit;e.Q6J("ngValue",i.id),e.xp6(1),e.Oqu(i.restaurantName)}}function R(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Restaurant Name is required"),e.qZA())}function b(t,n){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,R,2,0,"div",25),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.restaurantId.errors.required)}}function x(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Username is required"),e.qZA())}function C(t,n){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,x,2,0,"div",25),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.username.errors.required)}}function I(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Review Rating is required"),e.qZA())}function U(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Review Rating is a integer number between 1 to 5"),e.qZA())}function y(t,n){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,I,2,0,"div",25),e.YNc(2,U,2,0,"div",25),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.reviewRating.errors.required),e.xp6(1),e.Q6J("ngIf",i.f.reviewRating.errors.min||i.f.reviewRating.errors.max)}}function J(t,n){1&t&&(e.TgZ(0,"div"),e._uU(1,"Review Detail is required"),e.qZA())}function N(t,n){if(1&t&&(e.TgZ(0,"div",24),e.YNc(1,J,2,0,"div",25),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.f.reviewDetail.errors.required)}}function S(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(i);const a=e.oxw();return a.deleteReview(a.review.reviewId)}),e._uU(1,"Delete"),e.qZA()}}const c=function(t){return{"is-invalid":t}};let g=(()=>{class t{constructor(i,r,a,E,Q,k){this.formBuilder=i,this.route=r,this.router=a,this.restaurantDatabaseService=E,this.restaurantDALService=Q,this.reviewDALService=k,this.isAddMode=!0,this.submitted=!1,this.review=null,this.reviews=null,this.restaurants=null}ngOnInit(){this.id=Number(this.route.snapshot.params.id),this.isAddMode=!this.id,this.form=this.formBuilder.group({restaurantId:["",s.kI.required],username:[JSON.parse(localStorage.getItem("user")).username,s.kI.required],reviewRating:[3,[s.kI.required,s.kI.min(1),s.kI.max(5)]],reviewDetail:["",s.kI.required],reviewId:[""]}),this.restaurantDALService.selectAllRestaurant().then(i=>{this.restaurants=i}).catch(i=>{console.error(i),alert("No restaurant found. Enter a restaurant first."),this.router.navigate(["/restaurant/list"])}),this.reviewDALService.selectAllReview().then(i=>{this.reviews=i}).catch(i=>{console.error(i)}),this.isAddMode||this.reviewDALService.selectReview(this.id).then(i=>{this.review=i,this.form.patchValue({restaurantId:this.review.restaurantId,username:this.review.username,reviewRating:this.review.reviewRating,reviewDetail:this.review.reviewDetail,reviewId:this.review.reviewId}),console.log(this.review.restaurantId)}).catch(i=>console.error(i))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.isAddMode?this.createReview():this.updateReview())}createReview(){this.reviewDALService.insertReview(this.form.value,()=>{console.log("Success: Record added successfully"),alert("Success: Record added successfully")})}updateReview(){console.log(this.form.value),this.reviewDALService.updateReview(this.form.value,()=>{console.log("Success: Record review updated successfully"),alert("Success: Record review updated successfully")})}deleteReview(i){const r=this.reviews.find(a=>a.reviewId===i);this.reviewDALService.deleteReview(r,()=>{alert("Record review deleted successfully"),this.router.navigateByUrl("/")})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(s.qu),e.Y36(d.gz),e.Y36(d.F0),e.Y36(A.f),e.Y36(m.$),e.Y36(v.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-edit"]],decls:36,vars:19,consts:[[1,"card"],["class","card-header",4,"ngIf"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","restaurantId",1,"form-label"],["formControlName","restaurantId","name","restaurantId","id","restaurantId",1,"form-select",3,"ngClass"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","username",1,"form-label"],["type","text","name","username","id","username","formControlName","username","readonly","",1,"form-control",3,"ngClass"],[1,"form-label"],["formControlName","reviewRating",3,"id"],["for","reviewDetail",1,"form-label"],["type","text","name","reviewDetail","id","reviewDetail","formControlName","reviewDetail",1,"form-control",3,"ngClass"],[1,"form-group","mb-3","row"],[1,"col"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],[1,"col","text-end"],[1,"btn","btn-primary"],["routerLink","/review/list",1,"btn","btn-link"],[1,"card-header"],[3,"ngValue"],[1,"invalid-feedback"],[4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,_,2,0,"h4",1),e.YNc(2,T,2,0,"h4",1),e.TgZ(3,"div",2),e.TgZ(4,"form",3),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(5,"div",4),e.TgZ(6,"label",5),e._uU(7,"Restaurant Name *"),e.qZA(),e.TgZ(8,"select",6),e.TgZ(9,"option",7),e._uU(10,"Select a Restaurant"),e.qZA(),e.YNc(11,q,2,2,"option",8),e.qZA(),e.YNc(12,b,2,1,"div",9),e.qZA(),e.TgZ(13,"div",4),e.TgZ(14,"label",10),e._uU(15,"Username *"),e.qZA(),e._UZ(16,"input",11),e.YNc(17,C,2,1,"div",9),e.qZA(),e.TgZ(18,"div",4),e.TgZ(19,"label",12),e._uU(20,"Review Rating *"),e.qZA(),e._UZ(21,"ngx-star-rating",13),e.YNc(22,y,3,2,"div",9),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"label",14),e._uU(25,"Review Detail *"),e.qZA(),e._UZ(26,"input",15),e.YNc(27,N,2,1,"div",9),e.qZA(),e.TgZ(28,"div",16),e.TgZ(29,"div",17),e.YNc(30,S,2,0,"button",18),e.qZA(),e.TgZ(31,"div",19),e.TgZ(32,"button",20),e._uU(33,"Save"),e.qZA(),e.TgZ(34,"a",21),e._uU(35,"Cancel"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.isAddMode),e.xp6(1),e.Q6J("ngIf",!r.isAddMode),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(4),e.Q6J("ngClass",e.VKq(13,c,r.submitted&&r.f.restaurantId.errors)),e.xp6(3),e.Q6J("ngForOf",r.restaurants),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.restaurantId.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(15,c,r.submitted&&r.f.username.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.username.errors),e.xp6(4),e.Q6J("id","rating"),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.reviewRating.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(17,c,r.submitted&&r.f.reviewDetail.errors)),e.xp6(1),e.Q6J("ngIf",r.submitted&&r.f.reviewDetail.errors),e.xp6(3),e.Q6J("ngIf",!r.isAddMode))},directives:[u.O5,s._Y,s.JL,s.sg,s.EJ,s.JJ,s.u,u.mk,s.YN,s.Kr,u.sg,s.Fj,p.wK,d.yS],styles:[""]}),t})();const D=[{path:"",component:Z,children:[{path:"",component:f},{path:"list",component:f},{path:"add",component:g},{path:"edit/:id",component:g}]}];let L=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.Bz.forChild(D)],d.Bz]}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,L,s.UX,p.nI]]}),t})()}}]);